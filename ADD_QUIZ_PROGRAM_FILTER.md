# โ ุชุญุณูู ุตูุญุฉ ุฅุถุงูุฉ ุงุฎุชุจุงุฑ ูุตุบุฑ - ููุชุฑุฉ ุงููุญุชูู ุญุณุจ ุงูุจุฑูุงูุฌ

## ๐ฏ ุงูุชุญุฏูุซ

ุชู ุชุญุณูู ุตูุญุฉ "ุฅุถุงูุฉ ุงุฎุชุจุงุฑ ูุตุบุฑ" ูุชููู ุฃูุซุฑ ููุทููุฉ ูู ุงูุชุนุงูู:

### ูุจู ุงูุชุญุฏูุซ โ
- ุงููุณุชุฎุฏู ูุฎุชุงุฑ ุงููุญุชูู ุงูุชุฏุฑูุจู ูุจุงุดุฑุฉ ูู **ุฌููุน** ุงููุญุชููุงุช
- ุตุนูุจุฉ ูู ุฅูุฌุงุฏ ุงููุญุชูู ุงููุทููุจ
- ูุง ููุฌุฏ ุชุฑุงุจุท ููุทูู

### ุจุนุฏ ุงูุชุญุฏูุซ โ
1. **ุงุฎุชูุงุฑ ุงูุจุฑูุงูุฌ ุฃููุงู** โ ูุนุฑุถ ุฌููุน ุงูุจุฑุงูุฌ ุงููุชุงุญุฉ
2. **ุซู ุงุฎุชูุงุฑ ุงููุญุชูู ุงูุชุฏุฑูุจู** โ ูุนุฑุถ ููุท ุงููุญุชูู ุงููุฑุชุจุท ุจุงูุจุฑูุงูุฌ ุงููุฎุชุงุฑ
3. **ุชุฑุงุจุท ููุทูู** โ ุณูููุฉ ูู ุงูุงุฎุชูุงุฑ ูุงูุชูุธูู

## ๐ ูุง ุชู ุชุนุฏููู

### 1. ุฅุถุงูุฉ State ุฌุฏูุฏุฉ

```typescript
// State ููุจุฑุงูุฌ
const [programs, setPrograms] = useState<any[]>([]);
const [isLoadingPrograms, setIsLoadingPrograms] = useState(true);
const [selectedProgramId, setSelectedProgramId] = useState<number | undefined>(undefined);

// State ูููุญุชูู ุงููููุชุฑ
const [filteredContents, setFilteredContents] = useState<any[]>([]);
```

### 2. ุฏุงูุฉ ุชุญููู ุงูุจุฑุงูุฌ

```typescript
const loadPrograms = async () => {
  try {
    setIsLoadingPrograms(true);
    const data = await AuthService.getAllPrograms();
    setPrograms(Array.isArray(data) ? data : []);
  } catch (error) {
    Toast.show({
      type: 'error',
      text1: 'ูุดู ุชุญููู ุงูุจุฑุงูุฌ ุงูุชุฏุฑูุจูุฉ',
      position: 'bottom'
    });
  } finally {
    setIsLoadingPrograms(false);
  }
};
```

### 3. ุฏุงูุฉ ูุนุงูุฌุฉ ุงุฎุชูุงุฑ ุงูุจุฑูุงูุฌ ูุน ุงูููุชุฑุฉ

```typescript
const handleProgramChange = (programId: number) => {
  setSelectedProgramId(programId);
  setSelectedContentId(undefined);
  setSelectedQuestions([]);
  
  // ููุชุฑุฉ ุงููุญุชูู ุงูุชุฏุฑูุจู ุญุณุจ ุงูุจุฑูุงูุฌ ุงููุฎุชุงุฑ
  const filtered = trainingContents.filter(content => {
    // ูุฏุนู ุฃููุงุน ูุฎุชููุฉ ูู ุงูุจูุงูุงุช
    if (content.programId && content.programId === programId) {
      return true;
    }
    if (content.programIds && Array.isArray(content.programIds) && content.programIds.includes(programId)) {
      return true;
    }
    if (content.program && content.program.id === programId) {
      return true;
    }
    return false;
  });
  
  setFilteredContents(filtered);
};
```

### 4. ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงููุญุฏุซุฉ

```typescript
// SelectBox ููุจุฑุงูุฌ (ุงูุฎุทูุฉ ุงูุฃููู)
<View style={styles.inputGroup}>
  <Text style={styles.label}>ุงูุจุฑูุงูุฌ ุงูุชุฏุฑูุจู *</Text>
  <SelectBox
    data={programs.map(program => ({
      id: program.id,
      name: program.nameAr,
    }))}
    selectedId={selectedProgramId}
    onSelect={handleProgramChange}
    placeholder="ุงุฎุชุฑ ุงูุจุฑูุงูุฌ ุงูุชุฏุฑูุจู"
    loading={isLoadingPrograms}
  />
</View>

// SelectBox ูููุญุชูู ุงูุชุฏุฑูุจู (ุงูุฎุทูุฉ ุงูุซุงููุฉ)
<View style={styles.inputGroup}>
  <Text style={styles.label}>ุงููุญุชูู ุงูุชุฏุฑูุจู *</Text>
  {selectedProgramId ? (
    <SelectBox
      data={filteredContents.map(content => ({
        id: content.id,
        name: content.name || content.nameAr || `${content.code} - ${content.name}`,
      }))}
      selectedId={selectedContentId}
      onSelect={handleContentChange}
      placeholder={filteredContents.length > 0 ? "ุงุฎุชุฑ ุงููุญุชูู ุงูุชุฏุฑูุจู" : "ูุง ููุฌุฏ ูุญุชูู ููุฐุง ุงูุจุฑูุงูุฌ"}
      loading={isLoadingContents}
    />
  ) : (
    <View style={styles.disabledSelectBox}>
      <Text style={styles.disabledText}>ุงุฎุชุฑ ุงูุจุฑูุงูุฌ ุงูุชุฏุฑูุจู ุฃููุงู</Text>
    </View>
  )}
</View>
```

## ๐จ ุงูุชุตููู

### ุญุงูุงุช SelectBox ุงููุญุชูู ุงูุชุฏุฑูุจู:

1. **ูุจู ุงุฎุชูุงุฑ ุงูุจุฑูุงูุฌ** ๐
   ```
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
   โ ุงุฎุชุฑ ุงูุจุฑูุงูุฌ ุงูุชุฏุฑูุจู ุฃููุงู       โ (ูุนุทู - ุฑูุงุฏู)
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
   ```

2. **ุจุนุฏ ุงุฎุชูุงุฑ ุงูุจุฑูุงูุฌ - ููุฌุฏ ูุญุชูู** โ
   ```
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
   โ ุงุฎุชุฑ ุงููุญุชูู ุงูุชุฏุฑูุจู โผ            โ
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
   ```

3. **ุจุนุฏ ุงุฎุชูุงุฑ ุงูุจุฑูุงูุฌ - ูุง ููุฌุฏ ูุญุชูู** โ๏ธ
   ```
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
   โ ูุง ููุฌุฏ ูุญุชูู ููุฐุง ุงูุจุฑูุงูุฌ        โ
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
   ```

## ๐ฑ ุณููุงุฑูู ุงูุงุณุชุฎุฏุงู

```
ุงููุณุชุฎุฏู ููุชุญ ุตูุญุฉ "ุฅุถุงูุฉ ุงุฎุชุจุงุฑ ูุตุบุฑ"
    โ
1. ูุฎุชุงุฑ ุงูุจุฑูุงูุฌ ุงูุชุฏุฑูุจู (ูุซูุงู: "ุจุฑูุงูุฌ ุฅุฏุงุฑุฉ ุงูุฃุนูุงู")
    โ
2. ูุธูุฑ SelectBox ุงููุญุชูู ุงูุชุฏุฑูุจู ุจุงููุญุชููุงุช ุงูุฎุงุตุฉ ุจูุฐุง ุงูุจุฑูุงูุฌ ููุท
    โ
3. ูุฎุชุงุฑ ุงููุญุชูู ุงูุชุฏุฑูุจู (ูุซูุงู: "ูุจุงุฏุฆ ุงููุญุงุณุจุฉ")
    โ
4. ุชุธูุฑ ุงูุฃุณุฆูุฉ ุงูุฎุงุตุฉ ุจูุฐุง ุงููุญุชูู
    โ
5. ูุฎุชุงุฑ ุงูุฃุณุฆูุฉ ููููู ุจุงูู ุงูุญููู
    โ
6. ููุดุฆ ุงูุงุฎุชุจุงุฑ โ
```

## โจ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

### 1. ููุชุฑุฉ ุฐููุฉ ๐ง
- ูุฏุนู `programId` (ูุนุฑู ูุงุญุฏ)
- ูุฏุนู `programIds` (ูุตูููุฉ ูุนุฑูุงุช)
- ูุฏุนู `program.id` (object)

### 2. ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณูุฉ ๐
- ููุทู ูุงุถุญ: ุจุฑูุงูุฌ โ ูุญุชูู โ ุฃุณุฆูุฉ
- ุฑุณุงุฆู ุชูุถูุญูุฉ ูู ูู ุญุงูุฉ
- SelectBox ูุนุทู ูุจู ุงุฎุชูุงุฑ ุงูุจุฑูุงูุฌ

### 3. ุฅุนุงุฏุฉ ุชุนููู ุชููุงุฆูุฉ ๐
- ุนูุฏ ุชุบููุฑ ุงูุจุฑูุงูุฌุ ูุชู ูุณุญ:
  - ุงููุญุชูู ุงููุฎุชุงุฑ
  - ุงูุฃุณุฆูุฉ ุงููุฎุชุงุฑุฉ
- ูููุน ุงูุฃุฎุทุงุก ูุงูุชุถุงุฑุจ

### 4. ูุนุงูุฌุฉ ุงูุญุงูุงุช ุงูุฎุงุตุฉ โก
- **ูุง ููุฌุฏ ูุญุชูู ููุจุฑูุงูุฌ**: ุฑุณุงูุฉ ูุงุถุญุฉ
- **ุงูุจุฑูุงูุฌ ูู ูุฎุชุงุฑ ุจุนุฏ**: SelectBox ูุนุทู
- **ููุฌุฏ ูุญุชูู**: SelectBox ูุดุท ูุน ุงููุญุชููุงุช ุงููููุชุฑุฉ

## ๐ฏ ุงูููุงุฆุฏ

โ **ุชูุธูู ุฃูุถู** - ุชุฑุงุจุท ููุทูู ุจูู ุงูุจุฑูุงูุฌ ูุงููุญุชูู  
โ **ุณูููุฉ ุงูุงุณุชุฎุฏุงู** - ุฎุทูุงุช ูุงุถุญุฉ ููุชุณูุณูุฉ  
โ **ุชูููู ุงูุฃุฎุทุงุก** - ููุชุฑุฉ ุชููุงุฆูุฉ ุชููุน ุงูุงุฎุชูุงุฑุงุช ุงูุฎุงุทุฆุฉ  
โ **ุณุฑุนุฉ ุฃูุจุฑ** - ุนุฑุถ ุงููุญุชูู ุงููุฑุชุจุท ููุท  
โ **ูุฑููุฉ** - ูุฏุนู ุฃููุงุน ูุฎุชููุฉ ูู ุจูุงูุงุช API  

## ๐ง ุงูุชูุงูู

### ูุนูู ูุน ุฃููุงุน ุงูุจูุงูุงุช ุงูุชุงููุฉ:

```typescript
// ุงูููุน 1: programId ูุจุงุดุฑ
{
  id: 1,
  name: "ุงููุญุชูู 1",
  programId: 5
}

// ุงูููุน 2: programIds ููุตูููุฉ
{
  id: 2,
  name: "ุงููุญุชูู 2",
  programIds: [5, 6, 7]
}

// ุงูููุน 3: program ูู object
{
  id: 3,
  name: "ุงููุญุชูู 3",
  program: {
    id: 5,
    nameAr: "ุงูุจุฑูุงูุฌ"
  }
}
```

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

```
โ src/screens/AddQuizScreen.tsx
   โโโ ุฅุถุงูุฉ State ููุจุฑุงูุฌ ูุงููุญุชูู ุงููููุชุฑ
   โโโ ุฅุถุงูุฉ ุฏุงูุฉ loadPrograms()
   โโโ ุฅุถุงูุฉ ุฏุงูุฉ handleProgramChange()
   โโโ ุชุนุฏูู ูุงุฌูุฉ ุงููุณุชุฎุฏู (2 SelectBox)
   โโโ ุฅุถุงูุฉ ุฃููุงุท ููู disabled state
```

## ๐ ุงูุงุฎุชุจุงุฑ

### ููุชุญูู ูู ุงูุชุญุฏูุซ:

1. ุงูุชุญ ุตูุญุฉ "ุฅุถุงูุฉ ุงุฎุชุจุงุฑ ูุตุบุฑ"
2. ุชุฃูุฏ ูู ูุฌูุฏ SelectBox "ุงูุจุฑูุงูุฌ ุงูุชุฏุฑูุจู"
3. ุงุฎุชุฑ ุจุฑูุงูุฌ
4. ูุฌุจ ุฃู ูุธูุฑ SelectBox "ุงููุญุชูู ุงูุชุฏุฑูุจู" ูุน ุงููุญุชููุงุช ุงูุฎุงุตุฉ ุจุงูุจุฑูุงูุฌ ููุท
5. ุงุฎุชุฑ ูุญุชูู
6. ูุฌุจ ุฃู ุชุธูุฑ ุงูุฃุณุฆูุฉ ุงูุฎุงุตุฉ ุจูุฐุง ุงููุญุชูู

### ุญุงูุงุช ุงูุงุฎุชุจุงุฑ:

โ **ุงุฎุชูุงุฑ ุจุฑูุงูุฌ ูู ูุญุชูู** โ ูุธูุฑ ุงููุญุชูู  
โ **ุงุฎุชูุงุฑ ุจุฑูุงูุฌ ููุณ ูู ูุญุชูู** โ ุฑุณุงูุฉ "ูุง ููุฌุฏ ูุญุชูู"  
โ **ุชุบููุฑ ุงูุจุฑูุงูุฌ** โ ูุชู ูุณุญ ุงููุญุชูู ุงููุฎุชุงุฑ ูุงูุฃุณุฆูุฉ  
โ **ูุจู ุงุฎุชูุงุฑ ุงูุจุฑูุงูุฌ** โ SelectBox ุงููุญุชูู ูุนุทู  

## ๐ก ูุตุงุฆุญ ููุงุณุชุฎุฏุงู

1. **ุงุฎุชุฑ ุงูุจุฑูุงูุฌ ุฃููุงู** ุฏุงุฆูุงู
2. **ุฅุฐุง ูู ุชุฌุฏ ูุญุชูู** โ ุชุฃูุฏ ูู:
   - ุงูุจุฑูุงูุฌ ุงููุฎุชุงุฑ ุตุญูุญ
   - ุงููุญุชูู ูุฑุจูุท ุจุงูุจุฑูุงูุฌ ูู ุงููุธุงู
3. **ุนูุฏ ุชุบููุฑ ุงูุจุฑูุงูุฌ** โ ุณุชููุฏ ุงูุงุฎุชูุงุฑุงุช ุงูุณุงุจูุฉ (ุทุจูุนู)

## ๐ ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ ุงูููุชุฑุญุฉ

- [ ] ุฅุถุงูุฉ ุจุญุซ ุฏุงุฎู SelectBox
- [ ] ุฅุถุงูุฉ ุนุฏุฏ ุงููุญุชููุงุช ููู ุจุฑูุงูุฌ
- [ ] ุญูุธ ุขุฎุฑ ุจุฑูุงูุฌ ุชู ุงุฎุชูุงุฑู
- [ ] ุฅุถุงูุฉ ุฒุฑ "ุฅูุดุงุก ูุญุชูู ุฌุฏูุฏ" ุฅุฐุง ูู ููุฌุฏ ูุญุชูู

---

**ุชุงุฑูุฎ ุงูุชุญุฏูุซ:** 4 ุฃูุชูุจุฑ 2025  
**ุงูููู ุงููุนุฏู:** src/screens/AddQuizScreen.tsx  
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู

